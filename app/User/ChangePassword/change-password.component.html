<div class="modal fade" bsModal #changePasswordModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">

      <form (ngSubmit)="changePassword()" [formGroup]="changePasswordForm" >
        <div class="modal-header">
          <h4 class="modal-title pull-left">Change Password</h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="changePasswordModal.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

          <div class="padding-top-bottom-10">
            <div class="row">
              <div class="col-md-6 padding-bottom-5">
                <span><b>Old Password</b></span>
              </div>
            </div>
            <div class="row" [ngClass]="{'has-error': wrongPassword}">
              <div class="col-md-6" (click)="revalidate()">
                <app-input-password formControlName="oldPassword" ngDefaultControl
                  [required]="true"
                  [minLength]="8">
                </app-input-password>
                <span class="error-message" *ngIf="wrongPassword">Incorrect password, please try again</span>
              </div>
            </div>
          </div>

          <div formGroupName="newPasswordGroup">

            <div class="padding-top-bottom-10">
              <div class="row">
                <div class="col-md-6 padding-bottom-5">
                  <span><b>New Password</b></span>
                </div>
              </div>
              <div class="row" [ngClass]="{'has-error': changePasswordForm.controls['newPasswordGroup'].errors?.match}">
                <div class="col-md-6">
                  <app-input-password formControlName="newPassword" ngDefaultControl
                    [required]="true"
                    [minLength]="8">
                  </app-input-password>
                </div>
              </div>
            </div>

            <div class="padding-top-bottom-10">
              <div class="row">
                <div class="col-md-6 padding-bottom-5">
                  <span><b>Confirm New Password</b></span>
                </div>
              </div>
              <div class="row" [ngClass]="{'has-error': changePasswordForm.controls['newPasswordGroup'].errors?.match}">
                <div class="col-md-6">
                  <app-input-password formControlName="confirmNewPassword" ngDefaultControl
                    [required]="true"
                    [minLength]="8">
                  </app-input-password>
                </div>
              </div>
            </div>

            <span class="error-message" *ngIf="changePasswordForm.get('newPasswordGroup').errors?.match">
              These passwords don't match
            </span>

          </div>

        </div>
        <div class="modal-footer">
          <div class="row">
            <div class="col-md-12">
              <div class="float-right">
                <button type="reset" (click)="close()" class="btn btn-default">Cancel</button>
                <button type="submit" class="btn brand-btn">Save</button>
              </div>
            </div>
          </div>
        </div>
      </form>

    </div>
  </div>
</div>
